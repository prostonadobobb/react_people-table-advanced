(this["webpackJsonpreact_people-table-advanced"]=this["webpackJsonpreact_people-table-advanced"]||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(26),r=(n(36),n(37),n(8)),a=n(3),s=n(1),l=function(){var e=function(e){var t=e.isActive;return"navbar-item ".concat(t?"has-background-grey-lighter":"")};return Object(s.jsx)("nav",{"data-cy":"nav",className:"navbar is-fixed-top has-shadow",role:"navigation","aria-label":"main navigation",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"navbar-brand",children:[Object(s.jsx)(r.c,{to:"/",className:e,children:"Home"}),Object(s.jsx)(r.c,{to:"/people",className:e,children:"People"})]})})})},i=(n(39),function(){return Object(s.jsxs)("div",{"data-cy":"app",children:[Object(s.jsx)(l,{}),Object(s.jsx)("div",{className:"section",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsx)(a.b,{})})})]})}),o=n(5),j=n(15),u=n(0),d=n(9),b=n(10),h=n.n(b),O=n(27);function p(e,t){var n=new URLSearchParams(e.toString());return Object.entries(t).forEach((function(e){var t=Object(o.a)(e,2),c=t[0],r=t[1];null===r?n.delete(c):Array.isArray(r)?(n.delete(c),r.forEach((function(e){n.append(c,e)}))):n.set(c,r)})),n.toString()}var m=["children","params"],x=function(e){var t=e.children,n=e.params,c=Object(O.a)(e,m),a=Object(r.d)(),l=Object(o.a)(a,1)[0];return Object(s.jsx)(r.b,Object(j.a)(Object(j.a)({to:{search:p(l,n)}},c),{},{children:t}))},f=[16,17,18,19,20],v={All:null,Male:"m",Female:"f"},g=function(){var e=Object(r.d)(),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(u.useCallback)((function(e){var t=n.getAll("centuries");return t.includes(e)?t.filter((function(t){return t!==e})):[].concat(Object(d.a)(t),[e])}),[n]),l=Object(u.useCallback)((function(e){if(!e.length)return n.delete("input"),void c(n);n.set("input",e),c(n)}),[n,c]);return Object(s.jsxs)("nav",{className:"panel",children:[Object(s.jsx)("p",{className:"panel-heading",children:"Filters"}),Object(s.jsx)("p",{className:"panel-tabs","data-cy":"SexFilter",children:Object.entries(v).map((function(e){var t=Object(o.a)(e,2),c=t[0],r=t[1];return Object(s.jsx)(x,{className:h()({"is-active":n.get("sex")===r}),params:{sex:r},children:c},c)}))}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsxs)("p",{className:"control has-icons-left",children:[Object(s.jsx)("input",{"data-cy":"NameFilter",type:"search",className:"input",placeholder:"Search",onChange:function(e){return l(e.target.value)}}),Object(s.jsx)("span",{className:"icon is-left",children:Object(s.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsxs)("div",{className:"level is-flex-grow-1 is-mobile","data-cy":"CenturyFilter",children:[Object(s.jsx)("div",{className:"level-left",children:f.map((function(e){return Object(s.jsx)(x,{"data-cy":"century",className:h()("button mr-1",{"is-info":n.getAll("centuries").includes(e.toString())}),params:{centuries:a(e.toString())},children:e},e)}))}),Object(s.jsx)("div",{className:"level-right ml-4",children:Object(s.jsx)(x,{"data-cy":"centuryALL",className:h()("button is-success",{"is-outlined":0!==n.getAll("centuries").length}),params:{centuries:null},children:"All"})})]})}),Object(s.jsx)("div",{className:"panel-block",children:Object(s.jsx)(x,{className:"button is-link is-outlined is-fullwidth",params:{centuries:null,sex:null,query:null},children:"Reset all filters"})})]})},N=(n(40),function(){return Object(s.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(s.jsx)("div",{className:"Loader__content"})})}),y=function(e){var t=e.person,n=t.name,c=t.sex,a=t.slug;return Object(s.jsx)(r.b,{to:"/people/".concat(a),className:h()({"has-text-danger":"f"===c}),children:n})},w=function(e){var t=e.title,n=Object(r.d)(),c=Object(o.a)(n,1)[0];return Object(s.jsx)("th",{children:Object(s.jsxs)("span",{className:"is-flex is-flex-wrap-nowrap",children:[t[0].toUpperCase()+t.slice(1),Object(s.jsx)(x,{params:function(){var e=c.get("sort"),n=c.get("order"),r=null,a=null;return e!==t&&(r=t),e===t&&(r=e,a="desc"),e===t&&n&&(r=null,a=null),{sort:r,order:a}}(),className:"px-2",children:Object(s.jsx)("i",{className:h()("fas",{"fa-sort":!c.get("sort")&&!c.get("order")||c.get("sort")!==t,"fa-sort-up":c.get("sort")===t&&!c.get("order"),"fa-sort-down":c.get("sort")===t&&c.get("order")})})})]})})},k=["name","sex","born","died"],S=function(e){var t=e.people,n=Object(a.r)().peopleSlug;return Object(s.jsxs)("table",{"data-cy":"peopleTable",className:"table is-striped is-hoverable is-narrow is-fullwidth",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[k.map((function(e){return Object(s.jsx)(w,{title:e},e)})),Object(s.jsx)("th",{children:"Mother"}),Object(s.jsx)("th",{children:"Father"})]})}),Object(s.jsx)("tbody",{children:t.map((function(e){return Object(s.jsxs)("tr",{"data-cy":"person",className:h()({"has-background-warning":e.slug===n}),children:[Object(s.jsx)("td",{children:Object(s.jsx)(y,{person:e})}),Object(s.jsx)("td",{children:e.sex}),Object(s.jsx)("td",{children:e.born}),Object(s.jsx)("td",{children:e.died}),Object(s.jsx)("td",{children:e.mother?Object(s.jsx)(y,{person:e.mother}):e.motherName}),Object(s.jsx)("td",{children:void 0!==e.father?Object(s.jsx)(y,{person:e.father}):e.fatherName})]},e.slug)}))})]})},A=n(4),C=n(7),L="https://mate-academy.github.io/react_people-table/api/people.json";function P(e){return new Promise((function(t){return setTimeout(t,e)}))}function F(){return(F=Object(C.a)(Object(A.a)().mark((function e(){return Object(A.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P(500).then((function(){return fetch(L)})).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e,t){var n=t.sex,c=t.centuries,r=t.input,a=t.sort,s=t.order;return e.map((function(t){return Object(j.a)(Object(j.a)({},t),{},{motherName:t.motherName||"-",fatherName:t.fatherName||"-",mother:e.find((function(e){return e.name===t.motherName})),father:e.find((function(e){return e.name===t.fatherName}))})})).filter((function(e){var t=null===n||e.sex===n,a=null===c||null===c||void 0===c||!c.length||c.includes(Math.ceil(e.born/100).toString()),s=null===r||e.name.toLowerCase().includes(r.toLowerCase());return t&&a&&s})).sort((function(e,t){if(a){var n=e[a],c=t[a];if("number"===typeof n&&"number"===typeof c)return null===s?n-c:c-n;if("string"===typeof n&&"string"===typeof c)return null===s?n.localeCompare(c):c.localeCompare(n)}return 0}))},E=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(u.useState)(!1),l=Object(o.a)(a,2),i=l[0],j=l[1],d=Object(u.useState)(!1),b=Object(o.a)(d,2),h=b[0],O=b[1],p=Object(r.d)(),m=Object(o.a)(p,1)[0],x=Object(u.useMemo)((function(){var e={sex:m.get("sex"),centuries:m.getAll("centuries"),input:m.get("input"),sort:m.get("sort"),order:m.get("order")};return M(n,e)}),[m,n]),f=Object(u.useMemo)((function(){return!h&&!i&&0===x.length}),[h,i,x]),v=Object(u.useMemo)((function(){return!h&&!i&&x.length>0}),[h,i,x]);return Object(u.useEffect)((function(){j(!0),O(!1),function(){return F.apply(this,arguments)}().then((function(e){c(M(e,{sex:null,centuries:null,input:null,sort:null,order:null}))})).catch((function(){return O(!0)})).finally((function(){return j(!1)}))}),[]),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{className:"title",children:"People Page"}),Object(s.jsx)("div",{className:"block",children:Object(s.jsxs)("div",{className:"columns is-desktop is-flex-direction-row-reverse",children:[Object(s.jsx)("div",{className:"column is-7-tablet is-narrow-desktop",children:Object(s.jsx)(g,{})}),Object(s.jsx)("div",{className:"column",children:Object(s.jsxs)("div",{className:"box table-container",children:[i&&Object(s.jsx)(N,{}),h&&Object(s.jsx)("p",{"data-cy":"peopleLoadingError",children:"Something went wrong"}),f&&Object(s.jsx)("p",{"data-cy":"noPeopleMessage",children:"There are no people on the server"}),v&&Object(s.jsx)(S,{people:x})]})})]})})]})},_=function(){return Object(s.jsx)("h1",{className:"title",children:"Page not found"})},R=function(){return Object(s.jsx)("h1",{className:"title",children:"Home Page"})},T=function(){return Object(s.jsx)(r.a,{children:Object(s.jsx)(a.e,{children:Object(s.jsxs)(a.c,{path:"/",element:Object(s.jsx)(i,{}),children:[Object(s.jsx)(a.c,{path:"*",element:Object(s.jsx)(_,{})}),Object(s.jsx)(a.c,{index:!0,element:Object(s.jsx)(R,{})}),Object(s.jsx)(a.c,{path:"home",element:Object(s.jsx)(a.a,{to:"/",replace:!0})}),Object(s.jsxs)(a.c,{path:"people",children:[Object(s.jsx)(a.c,{index:!0,element:Object(s.jsx)(E,{})}),Object(s.jsx)(a.c,{path:":peopleSlug",element:Object(s.jsx)(E,{})})]})]})})})};Object(c.createRoot)(document.getElementById("root")).render(Object(s.jsx)(T,{}))}},[[41,1,2]]]);
//# sourceMappingURL=main.fbfe287d.chunk.js.map